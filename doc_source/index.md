# AWS CloudHSM User Guide

-----
*****Copyright &copy; Amazon Web Services, Inc. and/or its affiliates. All rights reserved.*****

-----
Amazon's trademarks and trade dress may not be used in
connection with any product or service that is not Amazon's,
in any manner that is likely to cause confusion among customers,
or in any manner that disparages or discredits Amazon. All other
trademarks not owned by Amazon are the property of their respective
owners, who may or may not be affiliated with, connected to, or
sponsored by Amazon.

-----
## Contents
+ [What is AWS CloudHSM?](introduction.md)
   + [AWS CloudHSM use cases](use-cases.md)
   + [AWS CloudHSM clusters](clusters.md)
   + [AWS CloudHSM cluster backups](backups.md)
   + [AWS CloudHSM Client SDK](client-tools-and-libraries.md)
   + [HSM users](hsm-users.md)
   + [Pricing](pricing.md)
   + [Regions](regions.md)
   + [AWS CloudHSM quotas](limits.md)
      + [System resources](system-resources.md)
+ [Getting started with AWS CloudHSM](getting-started.md)
   + [Create IAM administrative groups](create-iam-user.md)
   + [Create a virtual private cloud (VPC)](create-vpc.md)
   + [Create a cluster](create-cluster.md)
   + [Review cluster security group](configure-sg.md)
   + [Launch an Amazon EC2 client instance](launch-client-instance.md)
   + [Configure the Client Amazon EC2 instance security groups](configure-sg-client-instance.md)
   + [Create an HSM](create-hsm.md)
   + [Verify the identity and authenticity of your cluster's HSM (optional)](verify-hsm-identity.md)
   + [Initialize the cluster](initialize-cluster.md)
   + [Install and configure CloudHSM CLI](gs_cloudhsm_cli-install.md)
   + [Activate the cluster](activate-cluster.md)
   + [Reconfigure SSL with a new certificate and private key (optional)](getting-started-ssl.md)
   + [Build an application](create-apps.md)
+ [Best practices for AWS CloudHSM](best-practices.md)
+ [Managing AWS CloudHSM clusters](manage-clusters.md)
   + [Connect the client SDK to the AWS CloudHSM cluster](cluster-connect.md)
   + [Adding or removing HSMs in an AWS CloudHSM cluster](add-remove-hsm.md)
   + [Deleting an AWS CloudHSM cluster](delete-cluster.md)
   + [Creating AWS CloudHSM clusters from backups](create-cluster-from-backup.md)
+ [Managing AWS CloudHSM backups](manage-backups.md)
   + [Deleting and restoring backups](delete-restore-backup.md)
   + [Configuring AWS CloudHSM backup retention policy](manage-backup-retention.md)
   + [Copying backups across AWS Regions](copy-backup-to-region.md)
+ [Tagging AWS CloudHSM resources](tag-resources.md)
+ [Managing HSM users and keys in AWS CloudHSM](manage-hsm-users-and-keys.md)
   + [Managing HSM users in AWS CloudHSM](manage-hsm-users.md)
      + [Managing HSM users with CloudHSM CLI](manage-hsm-users-chsm-cli.md)
         + [Using CloudHSM CLI to manage users](manage-chsm-cli-users.md)
            + [How to manage HSM users with CloudHSM CLI](manage-users-cloudhsm-cli.md)
               + [To create an admin](create-admin-cloudhsm-cli.md)
               + [To create a crypto user](create-user-cloudhsm-cli.md)
               + [To list all HSM users in the cluster](list-users-cloudhsm-cli.md)
               + [To change HSM user passwords](change-user-password-cloudhsm-cli.md)
               + [To delete HSM users](delete-user-cloudhsm-cli.md)
         + [Using CloudHSM CLI to manage MFA](login-mfa-token-sign.md)
            + [Understanding MFA for HSM users](understand-mfa-cloudhsm-cli.md)
            + [Working with MFA for HSM users](enable-mfa-cloudhsm-cli.md)
               + [MFA Key Pair Requirements](mfa-key-pair-cloudhsm-cli.md)
               + [Set up MFA for CloudHSM CLI](set-up-mfa-for-cloudhsm-cli.md)
               + [Create users with MFA enabled](create-mfa-users-cloudhsm-cli.md)
               + [Log in users with MFA enabled](login-mfa-cloudhsm-cli.md)
               + [Rotate keys for users with MFA enabled](rotate-mfa-cloudhsm-cli.md)
               + [Deregister an MFA public key for admin users when MFA public key is registered](deregister-mfa-cloudhsm-cli.md)
               + [Token file reference](reference-mfa-cloudhsm-cli.md)
         + [Using CloudHSM CLI to manage quorum authentication (M of N access control)](quorum-auth-chsm-cli.md)
            + [Service names and types that support quorum authentication](quorum-auth-chsm-cli-service-names.md)
            + [Using quorum authentication for admins: first time setup](quorum-auth-chsm-cli-first-time.md)
            + [Using quorum authentication for admins](quorum-auth-chsm-cli-admin.md)
            + [Change the quorum minimum value for admins](quorum-auth-chsm-cli-min-value.md)
      + [Managing HSM users with CloudHSM Management Utility (CMU)](manage-hsm-users-cmu.md)
         + [Using CloudHSM Management Utility (CMU) to manage users](cli-users.md)
         + [Using CloudHSM Management Utility (CMU) to manage two-factor authentication (2FA) for crypto officers](manage-2fa.md)
         + [Using CloudHSM Management Utility (CMU) to manage quorum authentication (M of N access control)](quorum-authentication.md)
            + [Using quorum authentication for crypto officers: first time setup](quorum-authentication-crypto-officers-first-time-setup.md)
            + [Using quorum authentication for crypto officers](quorum-authentication-crypto-officers.md)
            + [Change the quorum minimum value for crypto officers](quorum-authentication-crypto-officers-change-minimum-value.md)
   + [Managing keys in AWS CloudHSM](manage-keys.md)
      + [Key synchronization in AWS CloudHSM](manage-key-sync.md)
      + [Using trusted keys to control key unwraps](cloudhsm_using_trusted_keys_control_key_wrap.md)
      + [AES key wrapping in AWS CloudHSM](manage-aes-key-wrapping.md)
      + [Using the command line to manage keys](using-kmu.md)
   + [Managing cloned clusters](cloned-clusters.md)
+ [AWS CloudHSM command line tools](command-line-tools.md)
   + [Configure tool](configure-tool.md)
      + [Client SDK 5 configure tool](configure-sdk-5.md)
         + [Advanced configurations for the Client SDK 5 configure tool](configure-sdk5-advanced-configs.md)
      + [Client SDK 3 configure tool](configure-sdk-3.md)
   + [CloudHSM Command Line Interface (CLI)](cloudhsm_cli.md)
      + [CloudHSM Command Line Interface (CLI) supported platforms](cloudhsm-cli-support.md)
      + [Getting started with CloudHSM Command Line Interface (CLI)](cloudhsm_cli-getting-started.md)
      + [Interactive and single command modes](cloudhsm_cli-modes.md)
      + [Reference for CloudHSM CLI commands](cloudhsm_cli-reference.md)
         + [cluster activate](cloudhsm_cli-cluster-activate.md)
         + [login](cloudhsm_cli-login.md)
            + [login mfa-token-sign](cloudhsm_cli-login-mfa-token-sign.md)
         + [logout](cloudhsm_cli-logout.md)
         + [user](cloudhsm_cli-user.md)
            + [user change-mfa](cloudhsm_cli-user-change-mfa.md)
            + [user change-password](cloudhsm_cli-user-change-password.md)
            + [user change-quorum](cloudhsm_cli-user-chqm.md)
               + [user change-quorum token-sign](cloudhsm_cli-user-chqm-token.md)
                  + [user change-quorum token-sign register](cloudhsm_cli-user-chqm-token-reg.md)
            + [user create](cloudhsm_cli-user-create.md)
            + [user delete](cloudhsm_cli-user-delete.md)
            + [user list](cloudhsm_cli-user-list.md)
         + [quorum](cloudhsm_cli-qm.md)
            + [quorum token-sign](cloudhsm_cli-qm-token.md)
               + [quorum token-sign delete](cloudhsm_cli-qm-token-del.md)
               + [quorum token-sign generate](cloudhsm_cli-qm-token-gen.md)
               + [quorum token-sign list](cloudhsm_cli-qm-token-list.md)
               + [quorum token-sign list-quorum-values](cloudhsm_cli-qm-token-list-qm.md)
               + [quorum token-sign list-timeouts](cloudhsm_cli-qm-token-list-tm.md)
               + [quorum token-sign set-quorum-value](cloudhsm_cli-qm-token-set-qm.md)
               + [quorum token-sign set-timeout](cloudhsm_cli-qm-token-set-tm.md)
   + [CloudHSM Management Utility (CMU)](cloudhsm_mgmt_util.md)
      + [Supported platforms for AWS CloudHSM management utility](cmu-support.md)
      + [Getting started with CloudHSM Management Utility (CMU)](cloudhsm_mgmt_util-getting-started.md)
      + [Install and configure the AWS CloudHSM client (Linux)](cmu-install-and-configure-client-linux.md)
      + [Install and configure the AWS CloudHSM client (Windows)](cmu-install-and-configure-client-win.md)
      + [cloudhsm_mgmt_util command reference](cloudhsm_mgmt_util-reference.md)
         + [changePswd](cloudhsm_mgmt_util-changePswd.md)
         + [createUser](cloudhsm_mgmt_util-createUser.md)
         + [deleteUser](cloudhsm_mgmt_util-deleteUser.md)
         + [findAllKeys](cloudhsm_mgmt_util-findAllKeys.md)
         + [getAttribute](cloudhsm_mgmt_util-getAttribute.md)
         + [getCert](cloudhsm_mgmt_util-getCert.md)
         + [getHSMInfo](cloudhsm_mgmt_util-getHSMInfo.md)
         + [getKeyInfo](cloudhsm_mgmt_util-getKeyInfo.md)
         + [info](cloudhsm_mgmt_util-info.md)
         + [listAttributes](cloudhsm_mgmt_util-listAttributes.md)
         + [listUsers](cloudhsm_mgmt_util-listUsers.md)
         + [loginHSM and logoutHSM](cloudhsm_mgmt_util-loginLogout.md)
         + [registerQuorumPubKey](cloudhsm_mgmt_util-registerQuorumPubKey.md)
         + [server](cloudhsm_mgmt_util-server.md)
         + [setAttribute](cloudhsm_mgmt_util-setAttribute.md)
         + [quit](cloudhsm_mgmt_util-quit.md)
         + [shareKey](cloudhsm_mgmt_util-shareKey.md)
         + [syncKey](cloudhsm_mgmt_util-syncKey.md)
         + [syncUser](cloudhsm_mgmt_util-syncUser.md)
   + [Key Management Utility (KMU)](key_mgmt_util.md)
      + [Getting started with key_mgmt_util](key_mgmt_util-getting-started.md)
      + [Install and configure the AWS CloudHSM client (Linux)](kmu-install-and-configure-client-linux.md)
      + [Install and configure the AWS CloudHSM client (Windows)](kmu-install-and-configure-client-win.md)
      + [key_mgmt_util command reference](key_mgmt_util-reference.md)
         + [aesWrapUnwrap](key_mgmt_util-aesWrapUnwrap.md)
         + [deleteKey](key_mgmt_util-deleteKey.md)
         + [Error2String](key_mgmt_util-Error2String.md)
         + [exit](key_mgmt_util-exit.md)
         + [exportPrivateKey](key_mgmt_util-exportPrivateKey.md)
         + [exportPubKey](key_mgmt_util-exportPubKey.md)
         + [exSymKey](key_mgmt_util-exSymKey.md)
         + [extractMaskedObject](key_mgmt_util-extractMaskedObject.md)
         + [findKey](key_mgmt_util-findKey.md)
         + [findSingleKey](key_mgmt_util-findSingleKey.md)
         + [genDSAKeyPair](key_mgmt_util-genDSAKeyPair.md)
         + [genECCKeyPair](key_mgmt_util-genECCKeyPair.md)
         + [genPBEKey](key_mgmt_util-genPBEKey.md)
         + [genRSAKeyPair](key_mgmt_util-genRSAKeyPair.md)
         + [genSymKey](key_mgmt_util-genSymKey.md)
         + [getAttribute](key_mgmt_util-getAttribute.md)
         + [getCaviumPrivKey](key_mgmt_util-getCaviumPrivKey.md)
         + [getCert](key_mgmt_util-getCert.md)
         + [getKeyInfo](key_mgmt_util-getKeyInfo.md)
         + [help](key_mgmt_util-help.md)
         + [importPrivateKey](key_mgmt_util-importPrivateKey.md)
         + [importPubKey](key_mgmt_util-importPubKey.md)
         + [imSymKey](key_mgmt_util-imSymKey.md)
         + [insertMaskedObject](key_mgmt_util-insertMaskedObject.md)
         + [IsValidKeyHandlefile](key_mgmt_util-IsValidKeyHandlefile.md)
         + [listAttributes](key_mgmt_util-listAttributes.md)
         + [listUsers](key_mgmt_util-listUsers.md)
         + [loginHSM and logoutHSM](key_mgmt_util-loginHSM.md)
         + [setAttribute](key_mgmt_util-setAttribute.md)
         + [sign](key_mgmt_util-sign.md)
         + [unWrapKey](key_mgmt_util-unwrapKey.md)
         + [verify](key_mgmt_util-verify.md)
         + [wrapKey](key_mgmt_util-wrapKey.md)
         + [Key Attribute Reference](key-attribute-table.md)
+ [AWS CloudHSM Client SDKs](use-hsm.md)
   + [Client SDK 5 supported platforms](client-supported-platforms.md)
   + [PKCS #11 library](pkcs11-library.md)
      + [Install Client SDK 5 for PKCS #11 library](pkcs11-library-install.md)
      + [PKCS #11 library](pkcs11-pin.md)
      + [Supported key types](pkcs11-key-types.md)
      + [Supported mechanisms](pkcs11-mechanisms.md)
      + [Supported API operations](pkcs11-apis.md)
      + [Supported attributes](pkcs11-attributes.md)
      + [Code samples for the PKCS #11 library](pkcs11-samples.md)
      + [Advanced configurations for PKCS #11](pkcs11-library-configs.md)
         + [Connecting to multiple slots with PKCS#11](pkcs11-library-configs-multi-slot.md)
         + [Retry configuration for PKCS #11](pkcs11-library-configs-retry.md)
   + [OpenSSL Dynamic Engine](openssl-library.md)
      + [Installing the OpenSSL Dynamic Engine](openssl5-install.md)
      + [Advanced configurations for OpenSSL](openssl-library-configs.md)
         + [Retry configuration for OpenSSL](openssl-library-configs-retry.md)
   + [JCE provider](java-library.md)
      + [Install and use the AWS CloudHSM JCE provider for Client SDK 5](java-library-install_5.md)
      + [Supported key types](java-lib-keys_5.md)
      + [Supported mechanisms for Client SDK 5](java-lib-supported_5.md)
      + [Supported Java attributes for Client SDK 5](java-lib-attributes_5.md)
      + [Code samples for the AWS CloudHSM software library for Java for Client SDK 5](java-samples_5.md)
      + [AWS CloudHSM JCE provider Javadocs](java-javadocs_5.md)
      + [Using AWS CloudHSM KeyStore Java class for Client SDK 5](alternative-keystore_5.md)
      + [Advanced configurations for JCE](java-lib-configs.md)
         + [Connecting to multiple clusters with the JCE provider](java-lib-configs-multi.md)
         + [Retry configuration for JCE](java-lib-configs-retry.md)
         + [Key extraction using JCE](java-lib-configs-getencoded.md)
   + [Cryptography API: Next Generation (CNG) and key storage providers (KSP) for Microsoft Windows](ksp-library.md)
      + [Verifying the KSP and CNG Providers for Windows](ksp-library-install.md)
      + [Windows AWS CloudHSM prerequisites](ksp-library-prereq.md)
      + [Associate a AWS CloudHSM key with a certificate](ksp-library-associate-key-certificate.md)
      + [Code sample for CNG provider](ksp-library-sample.md)
   + [Benefits of Client SDK 5](client-sdk-5-benefits.md)
      + [Migrating from Client SDK 3 to Client SDK 5](migrate-sdk.md)
   + [Previous Client SDK versions](choose-client-sdk.md)
      + [Client SDK 3 supported platforms](sdk3-support.md)
      + [Upgrading Client SDK 3 on Linux](client-upgrade.md)
      + [PKCS #11 library for Client SDK 3](pkcs11-v3-library.md)
         + [Installing Client SDK 3 for PKCS #11 library](install-pkcs11-v3.md)
         + [Authenticating to the PKCS #11 library (Client SDK 3)](pkcs11-v3-pin.md)
         + [Supported key types (Client SDK 3)](pkcs11-v3-key-types.md)
         + [Supported mechanisms (Client SDK 3)](pkcs11-v3-mechanisms.md)
         + [Supported API operations (Client SDK 3)](pkcs11-v3-apis.md)
         + [Supported attributes (Client SDK 3)](pkcs11-v3-attributes.md)
         + [Code samples for the PKCS #11 library (Client SDK 3)](pkcs11-v3-samples.md)
      + [Installing Client SDK 3 for OpenSSL Dynamic Engine](openssl3-install.md)
         + [Prerequisites for OpenSSL Dynamic Engine with Client SDK 3](openssl3-install-dyn3-prereqs.md)
         + [Install the OpenSSL Dynamic Engine for Client SDK 3](openssl3-install-openssl-library.md)
         + [Use the OpenSSL Dynamic Engine for Client SDK 3](openssl3-use-library.md)
      + [Client SDK 3 for JCE provider](java-library_3.md)
         + [Install and use the AWS CloudHSM JCE provider for Client SDK 3](java-library-install.md)
         + [Supported mechanisms for Client SDK 3](java-lib-supported.md)
         + [Supported Java attributes for Client SDK 3](java-lib-attributes.md)
         + [Code samples for the AWS CloudHSM software library for Java for Client SDK 3](java-samples.md)
         + [Using AWS CloudHSM KeyStore Java class for Client SDK 3](alternative-keystore.md)
+ [Integrating third-party applications with AWS CloudHSM](third-party-applications.md)
   + [Improve your web server security with SSL/TLS offload in AWS CloudHSM](ssl-offload.md)
      + [How SSL/TLS offload with AWS CloudHSM works](ssl-offload-overview.md)
      + [SSL/TLS offload on Linux](ssl-offload-linux.md)
         + [Using NGINX or Apache with AWS CloudHSM for SSL/TLS offload on Linux](third-offload-linux-openssl.md)
            + [Step 1: Set up the prerequisites](ssl-offload-prerequisites.md)
            + [Step 2: Generate or import a private key and SSL/TLS certificate](ssl-offload-import-or-generate-private-key-and-certificate.md)
            + [Step 3: Configure the web server](ssl-offload-configure-web-server.md)
            + [Step 4: Enable HTTPS traffic and verify the certificate](ssl-offload-enable-traffic-and-verify-certificate.md)
      + [Tutorial: Using OpenSSL Dynamic Engine with AWS CloudHSM for SSL/TLS offload on Windows](ssl-offload-windows.md)
         + [Step 1: Set up the prerequisites](ssl-offload-prerequisites-windows.md)
         + [Step 2: Create a certificate signing request (CSR) and certificate](ssl-offload-windows-create-csr-and-certificate.md)
         + [Step 3: Configure the web server](ssl-offload-configure-web-server-windows.md)
         + [Step 4: Enable HTTPS traffic and verify the certificate](ssl-offload-enable-traffic-and-verify-certificate-windows.md)
         + [(Optional) Step 5: Add a load balancer with Elastic Load Balancing](ssl-offload-add-load-balancing-windows.md)
   + [Configure Windows Server as a certificate authority (CA) with AWS CloudHSM](win-ca-overview.md)
      + [Windows Server CA step 1: Set up the prerequisites](win-ca-prerequisites.md)
      + [Windows Server CA step 2: Create a Windows Server CA with AWS CloudHSM](win-ca-setup.md)
      + [Windows Server CA step 3: Sign a certificate signing request (CSR) with your Windows Server CA with AWS CloudHSM](win-ca-sign-csr.md)
   + [Oracle database transparent data encryption (TDE) with AWS CloudHSM](oracle-tde.md)
      + [Oracle TDE with AWS CloudHSM: Set up the prerequisites](oracle-tde-prerequisites.md)
      + [Oracle TDE with AWS CloudHSM: Configure the database and generate the master encryption key](oracle-tde-configure-database-and-generate-master-key.md)
   + [Use Microsoft SignTool with AWS CloudHSM to sign files](signtool.md)
      + [Microsoft SignTool with AWS CloudHSM step 1: Set up the prerequisites](signtool-prereqs.md)
      + [Microsoft SignTool with AWS CloudHSM step 2: Create a signing certificate](signtool-csr.md)
      + [Microsoft SignTool with AWS CloudHSM step 3: Sign a file](signtool-sign.md)
   + [Java Keytool and Jarsigner](third_java-sdk_integration.md)
      + [Using Client SDK 5 to integrate with Java Keytool and Jarsigner](keystore-third-party-tools_5.md)
      + [Using Client SDK 3 to integrate with Java Keytool and Jarsigner](keystore-third-party-tools.md)
   + [Other third-party vendor integrations](other-integrations.md)
+ [Monitoring AWS CloudHSM](get-logs.md)
   + [Working with client SDK logs](hsm-client-logs.md)
   + [Working with AWS CloudTrail and AWS CloudHSM](get-api-logs-using-cloudtrail.md)
   + [Working with Amazon CloudWatch Logs and AWS CloudHSM](get-hsm-audit-logs-using-cloudwatch.md)
      + [How HSM audit logging works](get-audit-logs-from-cloudwatch.md)
      + [Viewing HSM audit logs in CloudWatch Logs](understand-audit-logs.md)
      + [Interpreting HSM audit logs](interpreting-audit-logs.md)
      + [HSM audit log reference](cloudhsm-audit-log-reference.md)
   + [Getting CloudWatch metrics for AWS CloudHSM](hsm-metrics-cw.md)
+ [Security in AWS CloudHSM](security.md)
   + [Data protection in AWS CloudHSM](data-protection.md)
      + [AWS CloudHSM client end-to-end encryption](client-end-to-end-encryption.md)
   + [Identity and access management for AWS CloudHSM](identity-access-management.md)
      + [Service-linked roles for AWS CloudHSM](service-linked-roles.md)
   + [FIPS validation](fips-validation.md)
   + [Resilience in AWS CloudHSM](disaster-recovery-resiliency.md)
   + [Infrastructure security in AWS CloudHSM](infrastructure-security.md)
   + [AWS CloudHSM and VPC endpoints](cloudhsm-vpc-endpoint.md)
   + [Update management in AWS CloudHSM](update-management.md)
+ [Troubleshooting AWS CloudHSM](troubleshooting.md)
   + [Known issues](KnownIssues.md)
      + [Known issues for all HSM instances](ki-all.md)
      + [Known issues for the PKCS #11 library](ki-pkcs11-sdk.md)
      + [Known issues for the JCE SDK](ki-jce-sdk.md)
      + [Known issues for the OpenSSL Dynamic Engine](ki-openssl-sdk.md)
      + [Known issues for Amazon EC2 instances running Amazon Linux 2](ki-al2.md)
      + [Known issues for integrating third-party applications](ki-third-party.md)
   + [Client SDK 3 key synchronization failures](ts-client-sync-fail.md)
   + [Client SDK 5 user contains inconsistent values](troubleshoot-sdk5-inconsistent-value.md)
   + [Extracting keys using JCE](troubleshoot-getencoded.md)
   + [Keep HSM users in sync across HSMs in the cluster](troubleshooting-keep-hsm-users-in-sync.md)
   + [Lost connection to the cluster](troubleshooting-lost-connection.md)
   + [Missing AWS CloudHSM audit logs in CloudWatch](troubleshooting-missing-audit-logs.md)
   + [Custom IVs with non-compliant length for AES key wrap](troubleshooting-aes-keys.md)
   + [Resolving cluster creation failures](troubleshooting-create-cluster.md)
   + [Retrieving client configuration logs](troubleshooting-log-collection-script.md)
   + [Verify the performance of the HSM](troubleshooting-verify-hsm-performance.md)
+ [Downloads for AWS CloudHSM Client SDK](client-history.md)
+ [Document history](document-history.md)